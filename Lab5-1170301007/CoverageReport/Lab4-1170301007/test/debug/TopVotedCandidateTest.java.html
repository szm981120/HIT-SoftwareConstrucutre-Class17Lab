<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>TopVotedCandidateTest.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">test (2) (2019-5-18 19:55:25)</a> &gt; <a href="../../index.html" class="el_group">Lab4-1170301007</a> &gt; <a href="../index.html" class="el_bundle">test</a> &gt; <a href="index.source.html" class="el_package">debug</a> &gt; <span class="el_source">TopVotedCandidateTest.java</span></div><h1>TopVotedCandidateTest.java</h1><pre class="source lang-java linenums">package debug;

import static org.junit.Assert.*;

import org.junit.Rule;
import org.junit.Test;
import org.junit.rules.ExpectedException;

<span class="pc bpc" id="L9" title="1 of 2 branches missed.">public class TopVotedCandidateTest {</span>

	/*
	 * Test strategy
	 * 	The algorithm is based on dichotomy. The factors which may affect algorithm may be numbers of candidates, 
	 * 	order of votes, query time. The test strategy tests default cases that the example indicates in spec, 
	 * 	a few equivalence cases, and a few assertion cases.
	 * 
	 * 	testDefault
	 * 		A case that example 1 indicates in spec.
	 * 	testNonAlternateVotes
	 * 		The order of votes is not alternate like the situation in default case.
	 * 	testMultiCandidates
	 * 		There are 4 candidates in persons. The order of votes is alternate.
	 * 	testMultiCandidatesNonAlternateVotes
	 * 		There are 4 candidates in persons. The order of votes is not alternate.
	 * 	testCasualTimes
	 * 		Vote times are casual not like the situation in default case.
	 * 	testPersonsTimesNotSameLength
	 * 		Test AssertionError when persons.length is not equal to times.length.
	 * 	testPersonsLengthLessThanOne
	 * 		Test AssertionError when persons.length is less than 1.
	 * 	testTimesLengthGreaterThanFiveThousand
	 * 		Test AssertionError when times.length is greater than 5000.
	 * 	testPersoniLessThanZero
	 * 		Test AssertionError when Persons[i] is less than 0.
	 * 	testPersoniGreaterThanPersonLength
	 * 		Test AssertionError when persons[i] is greater than persons.length.
	 * 	testTimeiLessThanZero
	 * 		Test AssertionError when times[i] is less than 0.
	 * 	testTimeiGreaterThanABillon
	 * 		Test AssertionError when times[i] is greater than 10e9.
	 * 	testTimesNotStrictlyIncreasing
	 * 		Test AssertionError when times is not a strictly increasing array.
	 * 	testParameterTLessThanTimes0
	 * 		Test AssertionError when parameter t in TopVotedCandidate.q(int t) is less than times[0].
	 */
	@Test(expected = AssertionError.class)
	public void testAssertionsEnabled() {
<span class="pc bpc" id="L48" title="1 of 2 branches missed.">		assert false;</span>
<span class="nc" id="L49">	}</span>

	@Test
	public void testDefault() {
<span class="fc" id="L53">		int[] persons = { 0, 1, 1, 0, 0, 1, 0 };</span>
<span class="fc" id="L54">		int[] times = { 0, 5, 10, 15, 20, 25, 30 };</span>
<span class="fc" id="L55">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="fc" id="L56">		assertEquals(0, tvc.q(0));</span>
<span class="fc" id="L57">		assertEquals(0, tvc.q(3));</span>
<span class="fc" id="L58">		assertEquals(1, tvc.q(5));</span>
<span class="fc" id="L59">		assertEquals(1, tvc.q(10));</span>
<span class="fc" id="L60">		assertEquals(1, tvc.q(12));</span>
<span class="fc" id="L61">		assertEquals(0, tvc.q(15));</span>
<span class="fc" id="L62">		assertEquals(0, tvc.q(20));</span>
<span class="fc" id="L63">		assertEquals(1, tvc.q(25));</span>
<span class="fc" id="L64">		assertEquals(0, tvc.q(30));</span>
<span class="fc" id="L65">	}</span>

	@Test
	public void testNonAlternateVotes() {
<span class="fc" id="L69">		int[] persons = { 0, 0, 1, 0, 1, 1, 1 };</span>
<span class="fc" id="L70">		int[] times = { 0, 5, 10, 15, 20, 25, 30 };</span>
<span class="fc" id="L71">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="fc" id="L72">		assertEquals(0, tvc.q(0));</span>
<span class="fc" id="L73">		assertEquals(0, tvc.q(5));</span>
<span class="fc" id="L74">		assertEquals(0, tvc.q(10));</span>
<span class="fc" id="L75">		assertEquals(0, tvc.q(15));</span>
<span class="fc" id="L76">		assertEquals(0, tvc.q(20));</span>
<span class="fc" id="L77">		assertEquals(1, tvc.q(25));</span>
<span class="fc" id="L78">		assertEquals(1, tvc.q(30));</span>
<span class="fc" id="L79">	}</span>

	@Test
	public void testMultiCandidates() {
<span class="fc" id="L83">		int[] persons = { 0, 1, 2, 1, 0, 2, 2, 3, 3, 3 };</span>
<span class="fc" id="L84">		int[] times = { 0, 5, 10, 15, 20, 25, 30, 35, 40, 45 };</span>
<span class="fc" id="L85">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="fc" id="L86">		assertEquals(0, tvc.q(0));</span>
<span class="fc" id="L87">		assertEquals(1, tvc.q(5));</span>
<span class="fc" id="L88">		assertEquals(2, tvc.q(10));</span>
<span class="fc" id="L89">		assertEquals(1, tvc.q(15));</span>
<span class="fc" id="L90">		assertEquals(0, tvc.q(20));</span>
<span class="fc" id="L91">		assertEquals(2, tvc.q(25));</span>
<span class="fc" id="L92">		assertEquals(2, tvc.q(30));</span>
<span class="fc" id="L93">		assertEquals(2, tvc.q(35));</span>
<span class="fc" id="L94">		assertEquals(2, tvc.q(40));</span>
<span class="fc" id="L95">		assertEquals(3, tvc.q(45));</span>
<span class="fc" id="L96">	}</span>

	@Test
	public void testMultiCandidatesNonAlternateVotes() {
<span class="fc" id="L100">		int[] persons = { 0, 0, 1, 1, 3, 3, 2, 2, 2, 3 };</span>
<span class="fc" id="L101">		int[] times = { 0, 5, 10, 15, 20, 25, 30, 35, 40, 45 };</span>
<span class="fc" id="L102">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="fc" id="L103">		assertEquals(0, tvc.q(0));</span>
<span class="fc" id="L104">		assertEquals(0, tvc.q(5));</span>
<span class="fc" id="L105">		assertEquals(0, tvc.q(10));</span>
<span class="fc" id="L106">		assertEquals(1, tvc.q(15));</span>
<span class="fc" id="L107">		assertEquals(1, tvc.q(20));</span>
<span class="fc" id="L108">		assertEquals(3, tvc.q(25));</span>
<span class="fc" id="L109">		assertEquals(3, tvc.q(30));</span>
<span class="fc" id="L110">		assertEquals(2, tvc.q(35));</span>
<span class="fc" id="L111">		assertEquals(2, tvc.q(40));</span>
<span class="fc" id="L112">		assertEquals(3, tvc.q(45));</span>
<span class="fc" id="L113">	}</span>

	@Test
	public void testCasualTimes() {
<span class="fc" id="L117">		int[] persons = { 0, 1, 1, 0, 0, 1, 0 };</span>
<span class="fc" id="L118">		int[] times = { 4, 7, 13, 14, 28, 102, 333 };</span>
<span class="fc" id="L119">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="fc" id="L120">		assertEquals(0, tvc.q(4));</span>
<span class="fc" id="L121">		assertEquals(0, tvc.q(5));</span>
<span class="fc" id="L122">		assertEquals(1, tvc.q(7));</span>
<span class="fc" id="L123">		assertEquals(1, tvc.q(13));</span>
<span class="fc" id="L124">		assertEquals(0, tvc.q(14));</span>
<span class="fc" id="L125">		assertEquals(0, tvc.q(28));</span>
<span class="fc" id="L126">		assertEquals(0, tvc.q(50));</span>
<span class="fc" id="L127">		assertEquals(1, tvc.q(102));</span>
<span class="fc" id="L128">		assertEquals(0, tvc.q(333));</span>
<span class="fc" id="L129">	}</span>

	@Rule
<span class="fc" id="L132">	public ExpectedException exception = ExpectedException.none();</span>

	@Test
	public void testPersonsTimesNotSameLength() {
<span class="fc" id="L136">		exception.expect(AssertionError.class);</span>
<span class="fc" id="L137">		exception.expectMessage(&quot;1 &lt;= persons.length = times.length &lt;= 5000&quot;);</span>
<span class="fc" id="L138">		int[] persons = { 0, 1, 1, 0, 0, 1, 0, 1 };</span>
<span class="fc" id="L139">		int[] times = { 0, 5, 10, 15, 20, 25, 30 };</span>
<span class="nc" id="L140">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="nc" id="L141">		assertEquals(0, tvc.q(3));</span>
<span class="nc" id="L142">		assertEquals(1, tvc.q(12));</span>
<span class="nc" id="L143">		assertEquals(0, tvc.q(15));</span>
<span class="nc" id="L144">	}</span>

	@Test
	public void testPersonsLengthLessThanOne() {
<span class="fc" id="L148">		exception.expect(AssertionError.class);</span>
<span class="fc" id="L149">		exception.expectMessage(&quot;1 &lt;= persons.length = times.length &lt;= 5000&quot;);</span>
<span class="fc" id="L150">		int[] persons = {};</span>
<span class="fc" id="L151">		int[] times = { 0, 5, 10, 15, 20, 25, 30 };</span>
<span class="nc" id="L152">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="nc" id="L153">		assertEquals(0, tvc.q(3));</span>
<span class="nc" id="L154">		assertEquals(1, tvc.q(12));</span>
<span class="nc" id="L155">		assertEquals(0, tvc.q(15));</span>
<span class="nc" id="L156">	}</span>

	@Test
	public void testTimesLengthGreaterThanFiveThousand() {
<span class="fc" id="L160">		exception.expect(AssertionError.class);</span>
<span class="fc" id="L161">		exception.expectMessage(&quot;1 &lt;= persons.length = times.length &lt;= 5000&quot;);</span>
<span class="fc" id="L162">		int[] persons = { 0, 1, 1, 0, 0, 1, 0 };</span>
<span class="fc" id="L163">		int[] times = new int[5001];</span>
<span class="fc bfc" id="L164" title="All 2 branches covered.">		for (int i = 0; i &lt; 5001; i++) {</span>
<span class="fc" id="L165">			times[i] = i;</span>
		}
<span class="nc" id="L167">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="nc" id="L168">		assertEquals(0, tvc.q(3));</span>
<span class="nc" id="L169">		assertEquals(1, tvc.q(12));</span>
<span class="nc" id="L170">		assertEquals(0, tvc.q(15));</span>
<span class="nc" id="L171">	}</span>

	@Test
	public void testPersoniLessThanZero() {
<span class="fc" id="L175">		exception.expect(AssertionError.class);</span>
<span class="fc" id="L176">		exception.expectMessage(&quot;0 &lt;= persons[i] &lt;= persons.length&quot;);</span>
<span class="fc" id="L177">		int[] persons = { 0, -1, 1, 0, 0, 1, 0 };</span>
<span class="fc" id="L178">		int[] times = { 0, 5, 10, 15, 20, 25, 30 };</span>
<span class="nc" id="L179">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="nc" id="L180">		assertEquals(0, tvc.q(3));</span>
<span class="nc" id="L181">		assertEquals(1, tvc.q(12));</span>
<span class="nc" id="L182">		assertEquals(0, tvc.q(15));</span>
<span class="nc" id="L183">	}</span>

	@Test
	public void testPersoniGreaterThanPersonLength() {
<span class="fc" id="L187">		exception.expect(AssertionError.class);</span>
<span class="fc" id="L188">		exception.expectMessage(&quot;0 &lt;= persons[i] &lt;= persons.length&quot;);</span>
<span class="fc" id="L189">		int[] persons = { 0, 10, 1, 0, 0, 1, 0 };</span>
<span class="fc" id="L190">		int[] times = { 0, 5, 10, 15, 20, 25, 30 };</span>
<span class="nc" id="L191">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="nc" id="L192">		assertEquals(0, tvc.q(3));</span>
<span class="nc" id="L193">		assertEquals(1, tvc.q(12));</span>
<span class="nc" id="L194">		assertEquals(0, tvc.q(15));</span>
<span class="nc" id="L195">	}</span>

	@Test
	public void testTimeiLessThanZero() {
<span class="fc" id="L199">		exception.expect(AssertionError.class);</span>
<span class="fc" id="L200">		exception.expectMessage(&quot;times is a strictly increasing array with all elements in [0, 10^9]&quot;);</span>
<span class="fc" id="L201">		int[] persons = { 0, 1, 1, 0, 0, 1, 0 };</span>
<span class="fc" id="L202">		int[] times = { 0, -5, 10, 15, 20, 25, 30 };</span>
<span class="nc" id="L203">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="nc" id="L204">		assertEquals(0, tvc.q(3));</span>
<span class="nc" id="L205">		assertEquals(1, tvc.q(12));</span>
<span class="nc" id="L206">		assertEquals(0, tvc.q(15));</span>
<span class="nc" id="L207">	}</span>

	@Test
	public void testTimeiGreaterThanABillon() {
<span class="fc" id="L211">		exception.expect(AssertionError.class);</span>
<span class="fc" id="L212">		exception.expectMessage(&quot;times is a strictly increasing array with all elements in [0, 10^9]&quot;);</span>
<span class="fc" id="L213">		int[] persons = { 0, 1, 1, 0, 0, 1, 0 };</span>
<span class="fc" id="L214">		int[] times = { 0, 5, 1000000001, 15, 20, 25, 30 };</span>
<span class="nc" id="L215">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="nc" id="L216">		assertEquals(0, tvc.q(3));</span>
<span class="nc" id="L217">		assertEquals(1, tvc.q(12));</span>
<span class="nc" id="L218">		assertEquals(0, tvc.q(15));</span>
<span class="nc" id="L219">	}</span>

	@Test
	public void testTimesNotStrictlyIncreasing() {
<span class="fc" id="L223">		exception.expect(AssertionError.class);</span>
<span class="fc" id="L224">		exception.expectMessage(&quot;times is a strictly increasing array with all elements in [0, 10^9]&quot;);</span>
<span class="fc" id="L225">		int[] persons = { 0, 1, 1, 0, 0, 1, 0 };</span>
<span class="fc" id="L226">		int[] times = { 0, 5, 10, 5, 20, 25, 30 };</span>
<span class="nc" id="L227">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="nc" id="L228">		assertEquals(0, tvc.q(3));</span>
<span class="nc" id="L229">		assertEquals(1, tvc.q(12));</span>
<span class="nc" id="L230">		assertEquals(0, tvc.q(15));</span>
<span class="nc" id="L231">	}</span>

	@Test
	public void testParameterTLessThanTimes0() {
<span class="fc" id="L235">		exception.expect(AssertionError.class);</span>
<span class="fc" id="L236">		exception.expectMessage(&quot;TopVotedCandidate.q(int t) is always called with t &gt;= times[0].&quot;);</span>
<span class="fc" id="L237">		int[] persons = { 0, 1, 1, 0, 0, 1, 0 };</span>
<span class="fc" id="L238">		int[] times = { 3, 5, 10, 15, 20, 25, 30 };</span>
<span class="fc" id="L239">		TopVotedCandidate tvc = new TopVotedCandidate(persons, times);</span>
<span class="nc" id="L240">		assertEquals(0, tvc.q(2));</span>
<span class="nc" id="L241">		assertEquals(1, tvc.q(12));</span>
<span class="nc" id="L242">		assertEquals(0, tvc.q(15));</span>
<span class="nc" id="L243">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span>test (2) (2019-5-18 19:55:25)</div></body></html>