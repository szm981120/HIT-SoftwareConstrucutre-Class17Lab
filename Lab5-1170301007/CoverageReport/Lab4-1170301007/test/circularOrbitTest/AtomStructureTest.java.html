<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>AtomStructureTest.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">test (2) (2019-5-18 19:55:25)</a> &gt; <a href="../../index.html" class="el_group">Lab4-1170301007</a> &gt; <a href="../index.html" class="el_bundle">test</a> &gt; <a href="index.source.html" class="el_package">circularOrbitTest</a> &gt; <span class="el_source">AtomStructureTest.java</span></div><h1>AtomStructureTest.java</h1><pre class="source lang-java linenums">package circularOrbitTest;

import static org.junit.Assert.*;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.List;
import java.util.Map;
import java.util.logging.Level;

import org.junit.Before;
import org.junit.Test;

import MyException.AtomElectronNumException;
import MyException.AtomElementException;
import MyException.AtomTrackNumException;
import MyException.DataScientificNumberException;
import MyException.DataSyntaxException;
import MyException.IllegalIntimacyInSocialTieException;
import MyException.NoObjectOnTrackException;
import atomTransitionMemento.Caretaker;
import centralObject.Nucleus;
import circularOrbit.AtomStructureFactory;
import circularOrbit.CircularOrbit;
import physicalObject.ConcreteElectronFactory;
import physicalObject.ElectronFactory;
import physicalObject.PhysicalObject;
import track.Track;
import track.TrackFactory;

<span class="pc bpc" id="L32" title="1 of 2 branches missed.">public class AtomStructureTest {</span>

<span class="fc" id="L34">	private static AtomStructureFactory atomStructureFactory = new AtomStructureFactory();</span>
<span class="fc" id="L35">	private static TrackFactory trackFactory = new TrackFactory();</span>
<span class="fc" id="L36">	private static CircularOrbit&lt;Nucleus, PhysicalObject&gt; atomStructure = atomStructureFactory.produce();</span>
<span class="fc" id="L37">	private static ElectronFactory electronFactory = new ConcreteElectronFactory();</span>

	/*
	 * Test strategy
	 * 	All tests below are about tests in atom structure. 
	 * 	@Before readFromFile
	 * 		Before any test, atomStructure should be initialized from AtomicStructure.txt.
	 * 		The test is all about atom structure from AtomicStructure.txt.
	 * 	testMementoMethod
	 * 		This tests Memento method in transition action.
	 * 		It does two transition to atom structure and saves these two states.
	 * 		And it restores these states to see if the transition can be undone.
	 * 	testAddTrack
	 * 		This tests addTrack.
	 * 		Add a track to atom structure to see the change before and after adding.
	 * 		Call getTracks to see if the test track is added.
	 * 	testDeleteTrack
	 * 		This tests deleteTrack.
	 * 		Delete a track in atom structure to see the change before and after deleting.
	 * 		Call getTracks to see if the track in test position is missed.
	 * 	testAddCentralObject
	 * 		This tests addCentralObject.
	 * 		Add a central object in atom structure to see the change before and after adding.
	 * 		Call getCentralObject to see if the central object is the test one after adding.
	 * 	testAddPhysicalObjectToTrack
	 * 		This tests addPhysicalObjectToTrack.
	 * 		Add a physical object to track to see the change before and after adding.
	 * 		Call getObjectsInTrack to see if the number of objects in corresponding track changes after adding.
	 * 	testDeletePhysicalObjectFromTrack
	 * 		This tests deletePhysicalObjectFromTrack.
	 * 		Delete a physical object from track to see the change before and after deleting.
	 * 		Call getObjectsInTrack to see if the number of objects in corresponding track changes after deleting.
	 * 	testResetObjectsAndTrack
	 * 		This tests resetObjectsAndTrack.
	 * 		Call resetObjectsAndTrack and then see if the tracks and objectInTracks is empty.
	 * 	testGetCentralObject
	 * 		This tests getCentralObject.
	 * 		See if the central object fits the data in file.
	 * 	testGetTracks
	 * 		This tests getTracks.
	 * 		See if the tracks fits the data in file.
	 * 	testGetObjectsInTrack
	 * 		This tests getObjectInTrack.
	 * 		See if the objects in tracks fits the data in file.
	 * 	testConstructSocialNetworkCircle
	 * 		Test that atom structure shouldn't have constructSocialNetworkCircle method.
	 * 	testAddRelationshipBetweenCentralAndPhysical
	 * 		Test that atom structure shouldn't have addRelationshipBetweenCentralAndPhysical method.
	 * 	testAddRelationshipBetweenPhysicalAndPhysical
	 * 		Test that atom structure shouldn't have addRelationshipBetweenPhysicalAndPhysical method.
	 * 	testDeleteRelationshipBetweenPhysicalAndPhysical
	 * 		Test that atom structure shouldn't have deleteRelationshipBetweenPhysicalAndPhysical method.
	 * 	testGetRelationBetweenCentralAndObject
	 * 		Test that atom structure shouldn't have getRelationBetweenCentralAndObject method.
	 * 	testGetRelationBetweenObjects
	 * 		Test that atom structure shouldn't have getRelationBetweenObjects method.
	 */
	@Test(expected = AssertionError.class)
	public void testAssertionsEnabled() {
<span class="pc bpc" id="L96" title="1 of 2 branches missed.">		assert false;</span>
<span class="nc" id="L97">	}</span>

	@Before
	public void readFromFile() {
<span class="fc" id="L101">		File file = new File(&quot;input/AtomicStructure.txt&quot;);</span>
		try {
<span class="fc" id="L103">			atomStructure.readFromFile(file);</span>
<span class="pc" id="L104">		} catch (NumberFormatException e) {</span>
<span class="nc" id="L105">			e.printStackTrace();</span>
<span class="nc" id="L106">		} catch (FileNotFoundException e) {</span>
<span class="nc" id="L107">			System.out.println(&quot;File not found. File: &quot; + file.getPath() + &quot;. &quot; + e.getMessage());</span>
<span class="nc" id="L108">			e.printStackTrace();</span>
<span class="nc" id="L109">		} catch (IOException e) {</span>
<span class="nc" id="L110">			e.printStackTrace();</span>
<span class="nc" id="L111">		} catch (AtomElementException e) {</span>
<span class="nc" id="L112">			System.out.println(e.getMessage());</span>
<span class="nc" id="L113">			e.printStackTrace();</span>
<span class="nc" id="L114">		} catch (AtomTrackNumException e) {</span>
<span class="nc" id="L115">			System.out.println(e.getMessage());</span>
<span class="nc" id="L116">			e.printStackTrace();</span>
<span class="nc" id="L117">		} catch (AtomElectronNumException e) {</span>
<span class="nc" id="L118">			System.out.println(e.getMessage());</span>
<span class="nc" id="L119">			e.printStackTrace();</span>
<span class="nc" id="L120">		} catch (DataSyntaxException | DataScientificNumberException | IllegalIntimacyInSocialTieException e) {</span>
<span class="nc bnc" id="L121" title="All 2 branches missed.">			assert false : &quot;shouldn't have this exception.&quot;;</span>
<span class="nc" id="L122">			e.printStackTrace();</span>
		}
<span class="fc" id="L124">	}</span>

	@Test
	public void testMementoMethod() throws Exception {
<span class="fc" id="L128">		Caretaker&lt;Nucleus, PhysicalObject&gt; caretaker = new Caretaker&lt;Nucleus, PhysicalObject&gt;();</span>
<span class="fc" id="L129">		caretaker.addMemento(atomStructure.save());</span>
<span class="fc bfc" id="L130" title="All 2 branches covered.">		for (int i = 1; i &lt;= 2; i++) {</span>
<span class="fc" id="L131">			atomStructure.deletePhysicalObjectFromTrack(electronFactory.produce(), trackFactory.produce(2));</span>
<span class="fc" id="L132">			atomStructure.addPhysicalObjectToTrack(electronFactory.produce(), trackFactory.produce(1));</span>
<span class="fc" id="L133">			caretaker.addMemento(atomStructure.save());</span>
		}
<span class="fc" id="L135">		assertEquals(&quot;expected 4&quot;, 4, atomStructure.getObjectsInTrack().get(atomStructure.getTracks().get(0)).size());</span>
<span class="fc" id="L136">		atomStructure.restore(caretaker.getMemento(1));</span>
<span class="fc" id="L137">		assertEquals(&quot;expected 3&quot;, 3, atomStructure.getObjectsInTrack().get(atomStructure.getTracks().get(0)).size());</span>
<span class="fc" id="L138">		atomStructure.restore(caretaker.getMemento(2));</span>
<span class="fc" id="L139">		assertEquals(&quot;expected 2&quot;, 2, atomStructure.getObjectsInTrack().get(atomStructure.getTracks().get(0)).size());</span>
<span class="fc" id="L140">	}</span>

	@Test
	public void testAddTrack() {
<span class="fc" id="L144">		assertEquals(&quot;expected 5&quot;, 5, atomStructure.getTracks().size());</span>
<span class="fc" id="L145">		atomStructure.addTrack(trackFactory.produce(10));</span>
<span class="fc" id="L146">		assertEquals(&quot;expected 6&quot;, 6, atomStructure.getTracks().size());</span>
<span class="fc" id="L147">		assertEquals(10.0, atomStructure.getTracks().get(5).getRadius(), 0.001);</span>
<span class="fc" id="L148">	}</span>

	@Test
	public void testDeleteTrack() {
<span class="fc" id="L152">		assertEquals(&quot;expected 5&quot;, 5, atomStructure.getTracks().size());</span>
<span class="fc" id="L153">		atomStructure.deleteTrack(trackFactory.produce(5.0));</span>
<span class="fc" id="L154">		assertEquals(&quot;expected 4&quot;, 4, atomStructure.getTracks().size());</span>
<span class="fc" id="L155">		assertEquals(4, atomStructure.getTracks().get(3).getRadius(), 0.001);</span>
<span class="fc" id="L156">	}</span>

	@Test
	public void testAddCentralObject() {
<span class="fc" id="L160">		char[] elementName = new char[2];</span>
<span class="fc" id="L161">		elementName[0] = 'N';</span>
<span class="fc" id="L162">		elementName[1] = 'a';</span>
<span class="fc" id="L163">		assertEquals(&quot;expected Rb&quot;, &quot;Rb&quot;, atomStructure.getCentralObject().toString());</span>
<span class="fc" id="L164">		atomStructure.addCentralObject(new Nucleus(elementName));</span>
<span class="fc" id="L165">		assertEquals(&quot;expecte Na&quot;, &quot;Na&quot;, atomStructure.getCentralObject().toString());</span>
<span class="fc" id="L166">	}</span>

	@Test
	public void testAddPhysicalObjectToTrack() {
<span class="fc" id="L170">		assertEquals(&quot;expected 8&quot;, 8, atomStructure.getObjectsInTrack().get(atomStructure.getTracks().get(1)).size());</span>
<span class="fc" id="L171">		atomStructure.addPhysicalObjectToTrack(electronFactory.produce(), atomStructure.getTracks().get(1));</span>
<span class="fc" id="L172">		assertEquals(&quot;expected 9&quot;, 9, atomStructure.getObjectsInTrack().get(atomStructure.getTracks().get(1)).size());</span>
<span class="fc" id="L173">	}</span>

	@Test
	public void testDeletePhysicalObjectFromTrack() throws NoObjectOnTrackException {
<span class="fc" id="L177">		assertEquals(&quot;expected 8&quot;, 8, atomStructure.getObjectsInTrack().get(atomStructure.getTracks().get(1)).size());</span>
<span class="fc" id="L178">		atomStructure.deletePhysicalObjectFromTrack(electronFactory.produce(), atomStructure.getTracks().get(1));</span>
<span class="fc" id="L179">		assertEquals(&quot;expected 7&quot;, 7, atomStructure.getObjectsInTrack().get(atomStructure.getTracks().get(1)).size());</span>
<span class="fc" id="L180">	}</span>

	@Test
	public void testResetObjectsAndTrack() {
<span class="fc" id="L184">		assertEquals(&quot;expected 8&quot;, 8, atomStructure.getObjectsInTrack().get(atomStructure.getTracks().get(1)).size());</span>
<span class="fc" id="L185">		assertEquals(&quot;expected 5&quot;, 5, atomStructure.getTracks().size());</span>
<span class="fc" id="L186">		atomStructure.resetObjectsAndTrack();</span>
<span class="fc" id="L187">		assertTrue(atomStructure.getTracks().isEmpty());</span>
<span class="fc" id="L188">		assertTrue(atomStructure.getObjectsInTrack().isEmpty());</span>
<span class="fc" id="L189">	}</span>

	@Test
	public void testGetCentralObject() {
<span class="fc" id="L193">		assertEquals(&quot;expected Rb&quot;, &quot;Rb&quot;, atomStructure.getCentralObject().toString());</span>
<span class="fc" id="L194">	}</span>

	@Test
	public void testGetTracks() {
<span class="fc" id="L198">		List&lt;Track&gt; tracks = atomStructure.getTracks();</span>
<span class="fc" id="L199">		assertEquals(&quot;expected 5&quot;, 5, tracks.size());</span>
<span class="fc" id="L200">		assertEquals(1, tracks.get(0).getRadius(), 0);</span>
<span class="fc" id="L201">		assertEquals(2, tracks.get(1).getRadius(), 0);</span>
<span class="fc" id="L202">		assertEquals(3, tracks.get(2).getRadius(), 0);</span>
<span class="fc" id="L203">		assertEquals(4, tracks.get(3).getRadius(), 0);</span>
<span class="fc" id="L204">		assertEquals(5, tracks.get(4).getRadius(), 0);</span>
<span class="fc" id="L205">	}</span>

	@Test
	public void testGetObjectsInTrack() {
<span class="fc" id="L209">		assertEquals(&quot;expected 5 tracks&quot;, 5, atomStructure.getTracks().size());</span>
<span class="fc" id="L210">		Map&lt;Track, List&lt;PhysicalObject&gt;&gt; objectsInTrack = atomStructure.getObjectsInTrack();</span>
<span class="fc" id="L211">		assertEquals(&quot;expected 2 electrons&quot;, 2, objectsInTrack.get(trackFactory.produce(1)).size());</span>
<span class="fc" id="L212">		assertEquals(&quot;expected 2 electrons&quot;, 8, objectsInTrack.get(trackFactory.produce(2)).size());</span>
<span class="fc" id="L213">		assertEquals(&quot;expected 2 electrons&quot;, 18, objectsInTrack.get(trackFactory.produce(3)).size());</span>
<span class="fc" id="L214">		assertEquals(&quot;expected 2 electrons&quot;, 8, objectsInTrack.get(trackFactory.produce(4)).size());</span>
<span class="fc" id="L215">		assertEquals(&quot;expected 2 electrons&quot;, 1, objectsInTrack.get(trackFactory.produce(5)).size());</span>
<span class="fc" id="L216">	}</span>

	@Test(expected = AssertionError.class)
	public void testConstructSocialNetworkCircle() {
<span class="nc" id="L220">		atomStructure.constructSocialNetworkCircle(null, null, null);</span>
<span class="nc" id="L221">	}</span>
	@Test(expected = AssertionError.class)
	public void testAddRelationshipBetweenCentralAndPhysical() {
<span class="nc" id="L224">		atomStructure.addRelationshipBetweenCentralAndPhysical(electronFactory.produce(), true, 0.5);</span>
<span class="nc" id="L225">	}</span>

	@Test(expected = AssertionError.class)
	public void testAddRelationshipBetweenPhysicalAndPhysical() {
<span class="pc" id="L229">		atomStructure.addRelationshipBetweenPhysicalAndPhysical(electronFactory.produce(), electronFactory.produce(),</span>
<span class="fc" id="L230">				0.5);</span>
<span class="nc" id="L231">	}</span>

	@Test(expected = AssertionError.class)
	public void testDeleteRelationshipBetweenPhysicalAndPhysical() {
<span class="pc" id="L235">		atomStructure.deleteRelationshipBetweenPhysicalAndPhysical(electronFactory.produce(),</span>
<span class="fc" id="L236">				electronFactory.produce());</span>
<span class="nc" id="L237">	}</span>

	@Test(expected = AssertionError.class)
	public void testGetRelationBetweenCentralAndObject() {
<span class="nc" id="L241">		atomStructure.getRelationBetweenCentralAndObject();</span>
<span class="nc" id="L242">	}</span>

	@Test(expected = AssertionError.class)
	public void testGetRelationBetweenObjects() {
<span class="nc" id="L246">		atomStructure.getRelationBetweenObjects();</span>
<span class="nc" id="L247">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span>test (2) (2019-5-18 19:55:25)</div></body></html>